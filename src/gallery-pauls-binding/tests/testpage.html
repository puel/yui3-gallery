<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Insert title here</title>
        <script src="http://yui.yahooapis.com/3.3.0/build/yui/yui.js" charset="utf-8"></script>
        <script src="../build_tmp/gallery-pauls-binding-debug.js"></script>
    </head>
    <body>
        <div id="form1">
            Name: <input id="txtName">
            Last name: <input bind="person.lastName">
            Male: <input type="checkbox" bind="person.sex">
        </div>
        <hr />
        <i>Second Inputs bind to the same path - simply as show case</i>
        <div id="form2">
            <input bind="person.name"> --> In span <span bind="person.name"></span>
            <input bind="person.lastName"> --> In span <span bind="person.lastName"></span>
            <select bind="person.sex"> --> In span <span bind="person.sex"></span>
                <option value="true">Male</option>
                <option value="false">Female</option>
            </select>
            <button type="button" bind="person.lastName"></button>
            <br>
            <button type="button" id="cmdDestroy">Destroy all bindings and Nodes in this area</button>
        </div>
        <hr />
        <textarea id="all" cols="100" rows="10"></textarea><br>
        <hr />
        <b>Path:</b> <span id="path"></span> <b>New value:</b> <span id="newValue"></span>
        <hr />
        <script>
            YUI({filter: 'raw'}).use('gallery-pauls-binding', 'dump', 'event', function(Y) {
                Y.log('start ...');
                var binding = new Y.Binding.DataBinding();
                // binding anything by hand
                binding.bindProperty('#txtName', 'value', 'person.name', 'change');
                
                // use auto bind
                binding.bindAll('#form1');
                binding.bindAll('#form2');
                
                // come control values
                var all = Y.one('#all'), path = Y.one('#path'), newValue = Y.one('#newValue');
                binding.after(Y.Binding.DataBinding.Event.NewValueSet, function(e) {
                    all.set('value', Y.dump(binding.getData()));
                    path.setContent(e.path);
                    newValue.setContent(e.value);
                });
                
                all.set('value', Y.dump(binding.getData()));
                
                Y.one('#cmdDestroy').on('click', function(e) {
                    // well YUI is not able to destory simply subnodes
                    // means we need to code this on our own here:
                    Y.one('#form2').get('children').each(function (node) {
                        node.destroy();
                    });
                    
                    Y.one('#form2').setAttribute('style', 'background-color: red');
                });
            });
        </script>
    </body>
</html>
